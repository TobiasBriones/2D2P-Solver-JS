<!-- Copyright (c) 2019-2022 Tobias Briones. All rights reserved. -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<!-- This file is part of https://github.com/repsymo/repsymo---mvp -->

<app-options-bar
  [examplesNumber]="1"
  [l]="this"
>
</app-options-bar>

<div class="top-panel">
  <app-input-pane
    [model]="model"
    [items]="inputPaneItems"
    (timeUnitChange)="onTimeUnitChange($event)"
  >
  </app-input-pane>
  <div class="next-button-container">
    <button
      class="btn btn-primary"
      (click)="onNext()"
    >
      Next
    </button>
  </div>
</div>

<app-tabular-input
  class="tabular-input"
  [ngClass]="{ 'gone': inputDataStep === 0 }"
  [header]="inputTableHeader"
  [timeUnit]="timeUnitLabel"
  [rows]="model.data"
  [multiColumn]="true"
  [startIndex]="0"
>
</app-tabular-input>

<div
  class="solve-button-container"
  [ngClass]="{ 'gone': inputDataStep === 0 }"
>
  <button
    class="btn btn-primary"
    (click)="onSolve()"
  >
    Solve
  </button>
</div>

<div
  id="solutionPanel"
  [ngClass]="{ 'gone': inputDataStep < 2 }"
>
  <div>
    <p>Problem solutions tree</p>
    <p>Y-Axis: Machine age in {{ timeUnitLabel }}</p>
    <p>X-Axis: Decision {{ timeUnitLabel }}</p>
  </div>
  <div style="overflow-x: auto;">
    <div id="solutionsTreeParent">
      <canvas id="solutionsTree">
      </canvas>
    </div>
  </div>

  <div class="divider"></div>

  <div
    class="stages"
    *ngFor="let stage of solver.stages; index as y"
  >
    <p>STAGE {{ y + 1 }}</p>
    <app-tabular-output
      [header]="getStageTableHeader()"
      [rows]="stage"
    >
    </app-tabular-output>
  </div>
  <div class="result">
    <p>Result chains</p>
    <div class="chains-container"></div>
  </div>
</div>
